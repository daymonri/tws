# Нотация UML (SD)

**UML (Unified Modeling Language)** – унифицированный язык моделирования системных и бизнес-процессов.

**SD (Sequence Diagram)** – диаграмма последовательностей. Визуализирует взаимодействие между объектами в системе, показывает порядок сообщений, которыми объекты обмениваются во времени, и их жизненный цикл.

**Диаграмма последовательностей состоит из следующих элементов:**

- **объекты** (зеленое);
- **линии жизни** (красное);
- **сообщения** (синее).

![SD](images/StandartsNotations4-1.png)

### Объекты
Сущности, которые взаимодействуют друг с другом. Основные типы объектов:
- **actor** – пользователь или «клиент»;
- **participant** – сервер, компонент системы;
- **database** – база данных;
- **queue** – топик или очередь.

![Объекты](images/StandartsNotations4-2.png)

### Линии жизни
Отображают течение времени, а также активность или исполнение определенных функций объекта. Представляют из себя вертикальную линию с блоком активности.

### Сообщения
Показывают обмен информацией между объектами. Например, клик пользователя по кнопке, но чаще это запрос или ответ, вызов хранимой процедуры или отправка сообщения. Сообщения отображаются в виде стрелок. Вид стрелки определяет тип сообщения:

![Типы стрелок](images/StandartsNotations4-3.png)
<img src="images/StandartsNotations4-3.png" alt="Типы стрелок" width="500" />

**Инструменты для работы с UML SD**

- графический редактор **draw.io**;
- песочница **PlantUML**;
- плагины в инструментах **JetBrains** или **VSCode**.

## Синтаксис PlantUNL

### Определяем объекты
```plantuml
actor "Пользователь" as u
participant "Фронт" as f
participant "Бэк" as b
```
### Описываем сообщения
```plantuml
u -> f
f -> b
b -->> f
f -->> u
```

Основные типы стрелок:
```plantuml
a ->> b: Асинхронный вызов
a -> b: Синхронный вызов
a -->> b: Ответ
a -x b: Запрос, который будет удален
'или от которого решили отказаться/устаревший
```
Визуализация:

<img src="images/StandartsNotations4-4.png" alt="Примеры стрелок" width="300"/>

### Группируем сообщения
**Группировка Alt** используется с оператором else для того, чтобы показать альтернативные кейсы взаимодействия. Например, объект отправляет запрос, а второй объект, в зависимости от полученных данных, выполняет разные действия.
```plantuml
alt case 1
  a -> b
else case 2
  a -> c
end
```
Визуализация:

<img src="images/StandartsNotations4-5.png" alt="Группировка Alt" width="500"/>

**Группировка Opt** используется для того, чтобы выделить сообщение в опциональный кейс. Например, объект отправляет запрос, а второй объект, в зависимости от полученных данных, может выполнить дополнительное действие.
```plantuml
opt
  a -> c
end
```
Визуализация:

<img src="images/StandartsNotations4-6.png" alt="Группировка Opt" width="500"/>

**Группировка Par** используется с оператором else для того, чтобы выделить сообщения, которые выполняются параллельно. Например, объект отправляет запрос, а второй объект параллельно выполнит внутренние вычисления и вернёт ответ первому объекту.
```plantuml
par
  a -> b
else
  a -> c
end
```
Визуализация:

<img src="images/StandartsNotations4-7.png" alt="Группировка Par" width="500"/>

**Группировка Loop** используется для того, чтобы выделить сообщения, которые выполняются несколько раз. Например, объект отправляет запрос, а второй объект выполнит внутренние действия несколько раз в зависимости от отправленных данных.
```plantuml
loop
  a -> c
end
```
Визуализация:

<img src="images/StandartsNotations4-8.png" alt="Группировка Loop" width="500"/>

**Группировка Group** используется для того, чтобы скомпоновать сообщения по смыслу. Например, на диаграмме может быть много взаимодействий и для того, чтобы было меньше путаницы можно подписать группы сообщений.
```plantuml
group
  a -> c
end
```
Визуализация:

<img src="images/StandartsNotations4-9.png" alt="Группировка Group" width="500"/>

**Можно группировать сами объекты.** Часто используется для описания взаимодействия нескольких систем с микросервисами.
```plantuml
box Название
  participant "Название 1"
  participant "Название 2"
box end
```
Визуализация:

<img src="images/StandartsNotations4-10.png" alt="Группировка объектов" width="500"/>

## Полезные возможности PlantUML
### Изменить цвет стрелок
```plantuml
-[#blue]>
-[#ff00ff]>
```
Визуализация:

<img src="images/StandartsNotations4-11.png" alt="Цветные стрелки" width="300"/>

### Изменить цвет текста
```plantuml
A -> B: <color #f0f>Запрос</color>
B -->> A: <color #green>Ответ</color>
```
Визуализация:

<img src="images/StandartsNotations4-12.png" alt="Цветной текст" width="300"/>

### Добавить подсказку
```plantuml
note right
  REST: **some.adress.com:433/new**
end note
```
Визуализация:

<img src="images/StandartsNotations4-13.png" alt="Подсказка" width="400"/>

### Поставить разделительную черту
```plantuml
== Сохранение данных ==
```
Визуализация:

<img src="images/StandartsNotations4-14.png" alt="Разделительная черта" width="300"/>

## Пример разработки SD в PlantUML
![Пример](images/StandartsNotations4-15.png)